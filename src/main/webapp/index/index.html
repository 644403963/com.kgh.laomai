<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui@1.4.12/lib/theme-default/index.css">
 	 <link rel="stylesheet" href="../index/css/index.css">
 	
 	 <!-- 先引入 Vue -->
  <script src="../common/js/vue.js"></script>
   <!-- 引入组件库 -->
  <script src="../common/js/index.js"></script>
  <style>

</style>
</head>
<body>
<div class="login-box" id="app" >
<el-container>
  <el-header>Header</el-header>
  <el-container>
    <el-aside width="15%"><el-menu
      default-active="2"
      class="el-menu-vertical-demo"
      @open="handleOpen"
      @close="handleClose"
      background-color="#545c64"
      text-color="#fff"
      active-text-color="#ffd04b">
      <el-submenu index="1">
        <template slot="title">
          <i class="el-icon-location"></i>
          <span>导航一</span>
        </template>
        <el-menu-item-group>
          <template slot="title">分组一</template>
          <el-menu-item index="1-1">选项1</el-menu-item>
          <el-menu-item index="1-2">选项2</el-menu-item>
        </el-menu-item-group>
        <el-menu-item-group title="分组2">
          <el-menu-item index="1-3">选项3</el-menu-item>
        </el-menu-item-group>
        <el-submenu index="1-4">
          <template slot="title">选项4</template>
          <el-menu-item index="1-4-1">选项1</el-menu-item>
        </el-submenu>
      </el-submenu>
      <el-menu-item index="2">
        <i class="el-icon-menu"></i>
        <span slot="title">导航二</span>
      </el-menu-item>
      <el-menu-item index="3">
        <i class="el-icon-setting"></i>
        <span slot="title">导航三</span>
      </el-menu-item>
    </el-menu>
    </el-aside>
    <el-main id="main"><el-tabs v-model="editableTabsValue" type="card" closable @tab-remove="removeTab" @tab-click="clickTab">
  <el-tab-pane
    v-for="(item, index) in editableTabs"
    :key="item.name"
    :label="item.title"
    :name="item.name"
  >
  <iframe v-bind:src="src"></iframe>
  </el-tab-pane>
</el-tabs>
</el-main>
  </el-container>
</el-container>
</div> 
</body>
  <!-- 引入组件库 -->
  <script src="../common/js/jquery-1.8.1.min.js"></script>
 <!--  页面js  -->
<!-- <script src="../index/js/index.js"></script> -->
<script>

new Vue({
		el : '#app',
		data : {
			src:'',
			urlName:'',
			titleName:'',
			 contentName:'',
			 editableTabsValue:'',
		        editableTabs: [{
		            title: 'test',
		            name: 'http://element-cn.eleme.io/#/zh-CN/component/tabs',
		            content: ''
		          }],
		        tabIndex: 0
		      },
			
		methods : {
			 handleOpen:function(key, keyPath) {
			        console.log(key, keyPath);
			      },
			      handleClose:function(key, keyPath) {
			        console.log(key, keyPath);
			      },
			      addTab:function(targetName) {
			          let newTabName = ++this.tabIndex + '';
			          this.editableTabs.push({
			            title: titleName,
			            name: urlName,
			            content: contentName
			          });
			          this.editableTabsValue2 = newTabName;
			        },
			        clickTab:function(targetName) {
			        	//获取 点击 tab 后 获得被点击的tab对象  获取其中name 用于存 url
			        	var url = targetName.name;
			        	//给iframe 中 赋值。
			        	src=url;
			        	debugger;
				        },
			        removeTab:function(targetName) {
			            let tabs = this.editableTabs2;
			            let activeName = this.editableTabsValue2;
			            if (activeName === targetName) {
			              tabs.forEach((tab, index) => {
			                if (tab.name === targetName) {
			                  let nextTab = tabs[index + 1] || tabs[index - 1];
			                  if (nextTab) {
			                    activeName = nextTab.name;
			                  }
			                }
			              });
			            }
			            
			            this.editableTabsValue2 = activeName;
			            this.editableTabs2 = tabs.filter(tab => tab.name !== targetName);
			          }
			        
		}
	})
	

</script>
</html>